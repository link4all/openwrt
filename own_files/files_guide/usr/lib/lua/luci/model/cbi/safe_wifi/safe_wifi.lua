m = Map("safe_wifi", translate("safeWiFi"))
local reboot = luci.http.formvalue("cbi.apply")
s = m:section(TypedSection, "safe_wifi",translate(""))
s.anonymous = true
s.addremove = false
enable = s:option(Flag, "useing", translate("Enable"))
s_hour = s:option(ListValue, "start_hour", translate("start hour"),translate("hour"))
s_hour:value("0", "00")
s_hour:value("1", "01")
s_hour:value("2", "02")
s_hour:value("3", "03")
s_hour:value("4", "04")
s_hour:value("5", "05")
s_hour:value("6", "06")
s_hour:value("7", "07")
s_hour:value("8", "08")
s_hour:value("9", "09")
s_hour:value("10", "10")
s_hour:value("11", "11")
s_hour:value("12", "12")
s_hour:value("13", "13")
s_hour:value("14", "14")
s_hour:value("15", "15")
s_hour:value("16", "16")
s_hour:value("17", "17")
s_hour:value("18", "18")
s_hour:value("19", "19")
s_hour:value("20", "20")
s_hour:value("21", "21")
s_hour:value("22", "22")
s_hour:value("23", "23")
s_min = s:option(ListValue, "start_min", translate("start min"),translate("min"))
s_min:value("0", "00")
s_min:value("5", "05")
s_min:value("10", "10")
s_min:value("15", "15")
s_min:value("20", "20")
s_min:value("25", "25")
s_min:value("30", "30")
s_min:value("35", "35")
s_min:value("40", "40")
s_min:value("45", "45")
s_min:value("50", "50")
s_min:value("55", "55")
e_hour = s:option(ListValue, "stop_hour", translate("stop hour"),translate("hour"))
e_hour:value("0", "00")
e_hour:value("1", "01")
e_hour:value("2", "02")
e_hour:value("3", "03")
e_hour:value("4", "04")
e_hour:value("5", "05")
e_hour:value("6", "06")
e_hour:value("7", "07")
e_hour:value("8", "08")
e_hour:value("9", "09")
e_hour:value("10", "10")
e_hour:value("11", "11")
e_hour:value("12", "12")
e_hour:value("13", "13")
e_hour:value("14", "14")
e_hour:value("15", "15")
e_hour:value("16", "16")
e_hour:value("17", "17")
e_hour:value("18", "18")
e_hour:value("19", "19")
e_hour:value("20", "20")
e_hour:value("21", "21")
e_hour:value("22", "22")
e_hour:value("23", "23")
e_min = s:option(ListValue, "stop_min", translate("stop min"),translate("min"))
e_min:value("0", "00")
e_min:value("5", "05")
e_min:value("10", "10")
e_min:value("15", "15")
e_min:value("20", "20")
e_min:value("25", "25")
e_min:value("30", "30")
e_min:value("35", "35")
e_min:value("40", "40")
e_min:value("45", "45")
e_min:value("50", "50")
e_min:value("55", "55")


if reboot then
s:option(DummyValue,"xiugai","修改成功！");
io.popen("/sbin/safe_wifi.sh &")
--luci.sys.call("/sbin/safe_wifi.sh &");
end

return m
