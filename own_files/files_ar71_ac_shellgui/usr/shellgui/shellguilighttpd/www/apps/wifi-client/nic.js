!function(){function s(s){Ha.mask.show(),$.post("/","app=wifi-client&action=get_nics_scan&dev="+s,function(n){n.status&&Ha.showNotify(n),$("#sta_container").empty();var i=!1;if(0===n.length){var a="<tr><td><h3>"+UI.There_is_no_AP_avaible+"</h3></td></tr>";$("#sta_container").append(a),Ha.mask.hide()}for(var o=0;o<n.length;o++){var t=n[o].ssid,d=n[o].sig_p;t=t.replace(/[^0-9a-zA-Z_\-]/g,"");var c='<tr id="sta-item-'+t+'"><td class="row"><div class="media col-sm-8"><div class="media-left"><div class="rssi-icon"><span></span><span></span><span></span><span></span></div><span class="rssi-text"></span></div><div class="media-body row wireless-content"><h4 class="media-heading col-xs-12">'+n[o].ssid+'</h4><p class="col-xs-12 col-sm-6 col-md-4">Channel:&nbsp;'+n[o].channel+'</p><p class="col-xs-12 col-sm-6 col-md-4">BSSID:&nbsp;'+n[o].bssid+'</p><p class="col-xs-12 col-sm-12 col-md-4">Encryption:&nbsp;'+n[o].enc+'</p></div></div><div class="col-sm-4"><div class="hidden join_form" id="join_form_'+t+"_"+o+'"><div class="form-group" id="password_input_'+o+'"><input type="password" class="form-control" id="password_'+t+"_"+o+'" placeholder="'+UI.Enter_the_password_here+'"></div><div class="row"><div class="col-xs-6"><button type="submit" class="btn btn-default btn-block submit_join" id="submit_join_'+t+"_"+o+'">'+UI.Save+'</button></div><div class="col-xs-6"><button class="btn btn-warning btn-block cancle_join" id="cancle_join_'+t+"_"+o+'">'+UI.Cancel+'</button></div></div></div><div class=" pull-right"><button class="btn btn-success join_btn" id="join_btn_'+t+"_"+o+'"><span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;&nbsp;&nbsp;'+UI.Join+"</button></div></div></td></tr>";$("#sta_container").append(c),o==n.length-1&&(i=!0),"none"==n[o].enc&&$("#password_input_"+o).addClass("hidden"),Ha.setRssiIcon(t,d)}$(".join_btn").click(function(){var s=$(this).prop("id").replace("join_btn_","");$(".join_btn").removeClass("hidden"),$(this).addClass("hidden"),$(".join_form").addClass("hidden"),$("#join_form_"+s).removeClass("hidden")}),$(".cancle_join").click(function(){var s=$(this).prop("id").replace("cancle_join_","");$("#join_btn_"+s).removeClass("hidden"),$(".join_form").addClass("hidden")}),$(".submit_join").click(function(){var i=$(this).prop("id").split("_").pop(),a=$(this).prop("id").replace("submit_join_",""),o=$("#password_"+a).val(),t={action:"set_sta",app:"wifi-client",dev:s,ssid:n[i].ssid,channel:n[i].channel,bssid:n[i].bssid,key:o,enc:n[i].enc};$("#password_"+a).prop("disabled","disabled"),$(".btn").prop("disabled","disabled"),Ha.ajax("/","json",t,"post","",function(s){s.status&&($("#password_"+a).prop("disabled",!1),$(".btn").prop("disabled",!1))})}),function(){Ha.setFooterPosition();var s=setInterval(function(){i&&(Ha.mask.hide(),clearInterval(s))},500)}()},"json")}Ha.mask.show();var n=$("#stas_container").attr("data-dev");s(n),$("#refresh").click(function(){s(n)})}();