!function(){function e(){var e=$("#user_form").serialize();e="app=sysusers&action=do_adduser&"+e,$.post("/",e,Ha.showNotify,"json")}function d(){var e=$("#user_form").serialize();e="app=sysusers&action=do_useredit&"+e,$.post("/",e,Ha.showNotify,"json")}function t(){var e=$("#group_form").serialize();e="app=sysusers&action=do_addgroup&"+e,$.post("/",e,Ha.showNotify,"json")}function a(){var e=$("#group_form").serialize();e="app=sysusers&action=do_editgroup&"+e,$.post("/",e,Ha.showNotify,"json")}function s(e){$.post("/","app=sysusers&action=do_deluser&username="+e,Ha.showNotify,"json"),$("#"+e).empty()}function r(e){$.post("/","app=sysusers&action=do_delgroup&group="+e,Ha.showNotify,"json"),$("#"+e).empty()}function o(e){$("#"+e).find("input").val("").prop("readonly",!1),$("#"+e).find("option").prop("selected",!1)}$("#add_user_btn").click(function(){$("#editUserModal").find("#editUserModalLabel").html(UI.Add_user),$("#editUserModal").find("form").attr("data-name","add_user_form"),$("#upwd").removeClass("hidden").prop("disabled",!1),$("#deletePassword").addClass("hidden"),$("#resetPassword").addClass("hidden"),$("#edit_upwd").addClass("hidden").find("input").prop("disabled",!0),o("user_form")}),$(".edit_user_btn").each(function(){$(this).click(function(){$("#editUserModal").find("#editUserModalLabel").html(UI.Edit_user),$("#editUserModal").find("form").attr("data-name","edit_user_form"),$("#upwd").addClass("hidden").prop("disabled",!0),$("#deletePassword").removeClass("hidden"),$("#resetPassword").removeClass("hidden"),$("#edit_upwd").addClass("hidden").find("input").prop("disabled",!1);var e=$(this).attr("data-user");$.post("/","app=sysusers&action=get_user_detail&user="+e,function(e){0==e.status&&($("#editUserModal").find('[name="username"]').val(e.user_detail.usrname),$("#editUserModal").find('[name="username"]').prop("readonly",!0),$("#editUserModal").find('[name="uid"]').val(e.user_detail.uid),$("#editUserModal").find('[name="gecos"]').val(e.user_detail.gecos),$("#editUserModal").find('[name="home_dir"]').val(e.user_detail.home_dir),$("#editUserModal").find('[name="shell"]').val(e.user_detail.shell),$("#editUserModal").find('[name="group"]').find("option").each(function(){$(this).prop("selected",!1),$(this).val()==e.user_detail.group&&$(this).prop("selected",!0)}))},"json")})}),$("#resetPassword").click(function(){return $("#edit_upwd").removeClass("hidden"),$(this).addClass("hidden"),$("#deletePassword").addClass("hidden"),!1}),$("#cancle-resetpwd").click(function(){$("#deletePassword,#resetPassword").removeClass("hidden"),$("#edit_upwd").addClass("hidden")}),$("#deletePassword").click(function(){var e=confirm(UI.Are_you_sure_to+" "+UI.DELETE_PASSWORD+"?");if(e){var d=$("#editUserModal").find('[name="username"]').val();$.post("/","app=sysusers&action=do_deluserpass&username="+d,function(e){Ha.showNotify(e),e.status||$("#"+d).find(".user_pwd").html("")},"json")}return!1}),$("#submit_user_btn").click(function(){"add_user_form"==$("#editUserModal").find("form").attr("data-name")?e():d()}),$("#add_group_btn").click(function(){o("group_form"),$("#editGroupModal").find("#editGroupModalLabel").html(UI.Add_new_group),$("#editGroupModal").find("form").attr("data-name","add_group_form")}),$(".edit_group_btn").each(function(){$(this).click(function(){var e=$(this).attr("data-group"),d=$(this).attr("data-gid");$("#editGroupModal").find("#editGroupModalLabel").html(UI.Edit_group),$("#editGroupModal").find("form").attr("data-name","edit_group_form"),$("#editGroupModal").find('[name="group"]').val(e).prop("readonly",!0),$("#editGroupModal").find('[name="gid"]').val(d)})}),$("#submit_group_btn").click(function(){"add_group_form"==$("#editGroupModal").find("form").attr("data-name")?t():a()}),$(".del_user_btn").click(function(){var e=$(this).parent().find(".edit_user_btn").attr("data-user");$("#delete_user_btn").attr("data-user",e)}),$("#delete_user_btn").click(function(){var e=$(this).attr("data-user");s(e)}),$(".del_group_btn").click(function(){var e=$(this).parent().find(".edit_group_btn").attr("data-group");$("#delete_group_btn").attr("data-group",e)}),$("#delete_group_btn").click(function(){var e=$(this).attr("data-group");r(e)})}();