function change_lang(e){var s="app=home&action=change_lang&lang="+e,t="/";Ha.ajax(t,"json",s,"post")}function change_theme(e){var s="app=home&action=change_theme&theme="+e,t="/";Ha.ajax(t,"json",s,"post")}function formatTime(e,s){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(s)&&(s=s.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return s}function UCIContainer(){this.keys=new Array,this.values=new Array,this.listOptions=new Array,this.createListOption=function(e,s,t,n){n=null==n;var i=e+"."+s+"."+t;if(null==this.listOptions[i])if(this.listOptions[i]=1,null!=this.values[i]){var a=this.values[i];this.values[i]=n||null==a?[]:[a]}else this.keys.push(i),this.values[i]=[]},this.set=function(e,s,t,n,i){i=null!=i&&i;var a=e+"."+s;if(null!=t&&""!=t&&(a=a+"."+t),null!=this.values[a])if(null!=this.listOptions[a]){for(var o=this.values[a];o.length>0&&!i;)o.pop();if(n instanceof Array){var r;for(r=0;r<n.length;r++)o.push(n[r])}else o.push(n);this.values[a]=o}else this.values[a]=n;else if(this.keys.push(a),null!=this.listOptions[a]){var o=[];if(n instanceof Array){var l;for(l=0;l<n.length;l++)o.push(n[l])}else o=[n];this.values[a]=o}else this.values[a]=n},this.get=function(e,s,t){var n=e+"."+s;null!=t&&""!=t&&(n=n+"."+t);var i=this.values[n];return null!=i?i:""},this.removeAllSectionsOfType=function(e,s){var t=this.getAllSectionsOfType(e,s),n=0;for(n=0;n<t.length;n++)this.removeSection(e,t[n])},this.getAllOptionsInSection=function(e,s,t){t=null!=t&&t;var n=new Array;for(keyIndex in this.keys){var i=this.keys[keyIndex],a=e+"."+s;if(i.match(a)&&i.match(/^[^\.]+\.[^\.]+\.[^\.]+/)&&(t||null==this.listOptions[i])){var o=i.match(/^[^\.]+\.[^\.]+\.([^\.]+)$/)[1];n.push(o)}}return n},this.getAllSectionsOfType=function(e,s){var t=new Array;for(keyIndex in this.keys)if(key=this.keys[keyIndex],key.match(e)&&key.match(/^[^\.]+\.[^\.]+$/)&&this.values[key]==s){var n=key.match(/^[^\.]+\.([^\.]+)$/)[1];t.push(n)}return t},this.getAllSections=function(e){var s=new Array;for(keyIndex in this.keys)if(key=this.keys[keyIndex],key.match(e)&&key.match(/^[^\.]+\.[^\.]+$/)){var t=key.match(/^[^\.]+\.([^\.]+)$/)[1];s.push(t)}return s},this.remove=function(e,s,t){var n=e+"."+s;""!=t&&(n=n+"."+t),null!=this.listOptions[n]&&(this.listOptions[n]=null);var i=this.values[n];if(null!=i){this.values[n]=null;for(var a=[];this.keys.length>0;){var o=this.keys.shift();o!=n&&a.push(o)}this.keys=a}else i="";return i},this.removeSection=function(e,s){removeKeys=new Array,sectionDefined=!1;for(keyIndex in this.keys){if(key=this.keys[keyIndex],testExp=new RegExp(e+"\\."+s+"\\."),key.match(testExp)){var t=key.split(".");removeKeys.push(t[2])}key==e+"."+s&&(sectionDefined=!0)}for(rkIndex in removeKeys)this.remove(e,s,removeKeys[rkIndex]);sectionDefined&&this.remove(e,s,"")},this.clone=function(){var e=new UCIContainer,s=0;for(s=0;s<this.keys.length;s++){var t=this.keys[s],n=this.values[t];null!=this.listOptions[t]&&(e.listOptions[t]=1);var i=t.match(/^([^\.]+)\.([^\.]+)\.([^\.]+)$/);null==i&&(i=t.match(/^([^\.]+)\.([^\.]+)$/),null!=i&&i.push("")),e.set(i[1],i[2],i[3],n,!0)}return e},this.print=function(){var e="",s=0;for(s=0;s<this.keys.length;s++){var t=this.keys[s];e=this.values[t]instanceof Array?e+"\n"+t+' = "'+this.values[t].join(",")+'"':e+"\n"+t+' = "'+this.values[t]+'"'}return e},this.getScriptCommands=function(e){var s=new Array,t=[],n=0;for(n=0;n<e.keys.length;n++){var i=e.keys[n],a=e.values[i],o=this.values[i];if(a instanceof Array&&!(o instanceof Array)||o instanceof Array&&!(a instanceof Array))s.push("uci del "+i);else if(a instanceof Array&&o instanceof Array){var r=a.length==o.length;if(r){var l,h=a.sort(),c=o.sort();for(l=0;r&&l<h.length;l++)r=h[l]==c[l]}r?t[i]=1:s.push("uci del "+i)}else null!=o&&""!=o||null==a||""==a||s.push("uci del "+i)}for(n=0;n<this.keys.length;n++){var i=this.keys[n],a=e.values[i],o=this.values[i];try{if(a instanceof Array||o instanceof Array)if(o instanceof Array){if(null==t[i]){var u;for(u=0;u<o.length;u++){var d=""+o[u];s.push("uci add_list "+i+"='"+d.replace(/'/,"'\\''")+"'")}}}else o=""+o,s.push("uci set "+i+"='"+o.replace(/'/,"'\\''")+"'");else a!=o&&null!=o&&""!=o&&(o=""+o,s.push("uci set "+i+"='"+o.replace(/'/,"'\\''")+"'"))}catch(f){alert("bad key = "+i+"\n")}}return s.push("uci commit"),s.join("\n")}}function quickSubmit(e){Ha.mask.show();var s=$.parseJSON(e);if(s.confirm){Ha.mask.hide();var t=confirm(s.confirm);if(!t)return Ha.mask.hide(),!1;Ha.mask.show()}$.post("/",s,function(e){Ha.mask.hide(),"json"==s.response?($("#response-container").addClass("hidden"),Ha.showNotify(e)):$("#response-container").removeClass("hidden").html(e)},s.response)}var Ha=window.Ha||{};Ha.showNotify=function(e){var s="success",t=5e3;e.status&&(s="error"),e.jump_url&&e.seconds&&(t=e.seconds),Lobibox.notify(s,{msg:e.msg,img:e.img,delay:t,size:"mini",showClass:"bounceInDown",hideClass:"fadeOut",sound:!1})},Ha.mask={show:function(){$(".loading").removeClass("hidden"),$("body").addClass("mask")},hide:function(){$("body").removeClass("mask"),$(".loading").addClass("hidden")}},Ha.disableForm=function(e){var s=$("#"+e);$(this).prop("disabled","disabled"),s.find('.form-control,[type="submit"],[type="checkbox"]').attr("disabled","disabled")},Ha.reableForm=function(e){var s=$("#"+e);$(this).prop("disabled",!1),s.find('.form-control,[type="submit"]').removeAttr("disabled")},Ha.ajax=function(e,s,t,n,i,a,o){Ha.disableForm(i),o||Ha.mask.show();var i=i||"",a=a||null;$.ajax({url:e||"",dataType:s||"json",data:t||"",type:n||"get",success:function(e){e.status&&Ha.reableForm(i),o||Ha.showNotify(e);var s=e.jump_url||!1;s&&e.seconds?(Ha.disableForm(i),setTimeout(function(){location.href=s},e.seconds)):Ha.reableForm(i),"function"==typeof a&&a(e,i)},complete:function(){Ha.mask.hide()},error:function(e){}})},Ha.setFooterPosition=function(){var e=$("#header").height(),s=$("#main").height(),t=$(window).height(),n=$("#footer").height(),i=e+s+n,a=t-i;a>0?$("#footer").addClass("absolute"):a<0&&$("#footer").removeClass("absolute")},Ha.setFooterPosition(),$('[data-toggle="tab"]').each(function(e){$(this).on("click",function(){setTimeout(function(){Ha.setFooterPosition()})})}),$(window).resize(function(){Ha.setFooterPosition()}),$("#collapsedBtn").click(function(){var e=setInterval(function(){Ha.setFooterPosition()});setTimeout(function(){clearInterval(e)},500)}),Ha.setRssiIcon=function(e,s){$("#sta-item-"+e).find(".rssi-text").html(s+"%");var t=$("#sta-item-"+e).find(".rssi-icon");s<=0?t.find("span").each(function(e){$(this).css("background-color","transparent")}):s>0&&s<=25?t.find("span").each(function(e){e<1?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):s>25&&s<=50?t.find("span").each(function(e){e<2?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):s>50&&s<=75?t.find("span").each(function(e){e<3?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):t.find("span").each(function(e){$(this).css("background-color","#0f0")})},function(){$(window).load(function(){var e=$(window).scrollTop();e>100?$(".gotop-widget").removeClass("hidden"):($(".gotop-widget").addClass("hidden"),$(".menu-widget").addClass("hidden"))}),$(window).scroll(function(){var e=$(window).scrollTop();e>100?$(".gotop-widget").removeClass("hidden"):($(".gotop-widget").addClass("hidden"),$(".menu-widget").addClass("hidden"))}),$("#menu-widget-btn").click(function(){$(".menu-widget").hasClass("hidden")?$(".menu-widget").removeClass("hidden"):$(".menu-widget").addClass("hidden")}),$(".menu-widget").mouseleave(function(){$(this).addClass("hidden")})}(),function(){$('[data-target="#quickModal"]').click(function(){$("#response-container").empty()})}();